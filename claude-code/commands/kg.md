---
name: kg
description: Token-Efficient Knowledge Graph Session Capture & Optimization. For use with mcp-knowledge-graph. System for AI-optimized knowledge storage and deduplication. Use PROACTIVELY for session capture.
---

# /kg - Token-Efficient Knowledge Graph Session Capture & Optimization

## üß† Token-Efficient Knowledge Graph Session Capture & Optimization Protocol

**MISSION**: Transform this session'\''s knowledge into permanent intellectual capital through AI-optimized KG capture with maximum storage efficiency.

**EXECUTION FRAMEWORK**:

### 1. SESSION INTELLIGENCE ANALYSIS
Systematically analyze the current conversation for:
- **Technologies/Tools**: Any tech mentioned, used, or discussed
- **Projects/Systems**: Business initiatives, codebases, implementations  
- **Concepts/Methods**: Frameworks, approaches, methodologies
- **People/Roles**: Individuals, teams, stakeholders mentioned
- **Decisions/Insights**: Key conclusions, breakthroughs, learnings
- **Processes/Workflows**: Step-by-step procedures discovered or refined
- **Problems/Solutions**: Issues identified and their resolutions

### 2. ENTITY CLASSIFICATION INTELLIGENCE
For each identified item, determine optimal entity type:
- **Technology**: Programming languages, tools, platforms, libraries
- **Project**: Business initiatives, applications, systems
- **Concept**: Methodologies, frameworks, principles
- **Person**: Individuals, roles, stakeholders
- **Process**: Workflows, procedures, methodologies
- **Insight**: Key learnings, breakthroughs, decisions

### 3. AI-OPTIMIZED STORAGE FORMAT
**CRITICAL**: KG is for AI consumption, NOT human readability. Use maximum token efficiency:

**Observation Format Guidelines**:
- **Structured Data**: Use JSON-like notation: `{tool: "pandoc", ver: "3.1", use: "pdf‚Üímd", perf: "excellent"}`
- **Abbreviations**: `cfg‚Üíconfig, impl‚Üíimplementation, req‚Üírequirements, perf‚Üíperformance`
- **Compressed Syntax**: `API v2‚Üíprod ready | DB migration‚Üícomplete | Auth system‚ÜíOAuth2`
- **Key-Value Pairs**: `tech: Docker | purpose: containerization | project: main-app | status: prod`
- **Relationship Codes**: `depends‚Üí, enables‚Üí, blocks‚Üí, integrates‚Üí, replaces‚Üí`

**Entity Naming**: Use consistent, searchable formats:
- Technologies: `docker-3.4`, `typescript-5.0`, `claude-sonnet-4`
- Projects: `main-api`, `user-dashboard`, `workflow-automation`
- Processes: `compliance-workflow`, `kg-optimization`, `rpm-methodology`

### 4. KG INTEGRATION PROTOCOL
Execute in this exact sequence:

**Step 1**: Search existing KG for each identified entity
```
Use mcp__kg__search_nodes for each entity to check existing presence
NEVER use mcp__kg__read_graph (too large, will exceed token limits)
```

**Step 2**: Create new entities for items not in KG
```
Use mcp__kg__create_entities with AI-optimized observations (compressed format)
Focus: Maximum information density, minimum token usage
```

**Step 3**: Add observations to existing entities  
```
Use mcp__kg__add_observations for entities already in KG with compressed session insights
Merge: Add only NEW information, avoid redundancy
```

**Step 4**: Create relationships discovered in session
```
Use mcp__kg__create_relations for connections revealed in conversation
Use compressed relationship types: depends‚Üí, enables‚Üí, integrates‚Üí
```

**Step 5**: POST-CREATION OPTIMIZATION & DEDUPLICATION
```
CRITICAL: After all creation/updates, optimize the KG:

A) Search for potential duplicates:
   - Use mcp__kg__search_nodes to find similar entity names
   - Look for entities with >80% observation overlap
   - Identify redundant or near-duplicate entries

B) Consolidate duplicates found:
   - Use mcp__kg__delete_entities for redundant entries
   - Use mcp__kg__add_observations to merge content into primary entity
   - Use mcp__kg__create_relations to preserve any lost connections

C) Compress observations:
   - Review newly created/updated entities
   - Identify verbose observations that can be compressed
   - Use mcp__kg__delete_observations + mcp__kg__add_observations to replace with compressed versions

D) Optimize relationships:
   - Remove redundant relationship paths
   - Consolidate multiple similar relationships into single optimized connections
```

### 5. CAPTURE QUALITY STANDARDS
**Include** (using compressed AI-optimized format):
‚úÖ Actionable insights and decisions ‚Üí `insight: {decision}, impact: {business}, impl: {steps}`
‚úÖ Technical implementations and solutions ‚Üí `tech: {tool}, use: {purpose}, result: {outcome}`
‚úÖ Process improvements and optimizations ‚Üí `process: {name}, before‚Üíafter: {change}, gain: {benefit}`
‚úÖ Key relationships and dependencies ‚Üí `{entity1} depends‚Üí {entity2}`, `{A} enables‚Üí {B}`
‚úÖ Breakthrough moments and learnings ‚Üí `breakthrough: {discovery}, context: {situation}, value: {impact}`

**Exclude**:
‚ùå Trivial conversational elements and pleasantries
‚ùå Generic information without specific actionable context
‚ùå Temporary/session-specific details without lasting value
‚ùå Duplicate information already well-captured in existing entities

### 6. EXECUTION INTELLIGENCE
- **Token Efficiency**: Compress all observations using AI-optimized syntax
- **Batch Operations**: Use parallel KG tool calls when possible for speed
- **Deduplication First**: Always search before creating to avoid duplicates
- **Relationship Density**: Connect new insights to existing knowledge web
- **Quality Compression**: Maximum information density in minimum tokens
- **Tool Restrictions**: NEVER use mcp__kg__read_graph (exceeds token limits)

### 7. OPTIMIZATION COMPLETION REPORTING
Provide comprehensive efficiency summary:

**Creation Metrics**:
- Entities created: {N} new | Updated: {N} existing 
- Relationships established: {N} new connections
- Token efficiency: Avg {X} tokens/observation (target: <50)

**Optimization Metrics**:
- Duplicates identified: {N} entities | Consolidated: {N} merged
- Observations compressed: {N} verbose‚Üícompressed ({X}% token reduction)
- Redundant relationships removed: {N} optimized
- Total KG token savings: {X} tokens (~{Y}% efficiency gain)

**Knowledge Impact**:
- Most valuable insights captured (top 3 with business/technical impact)
- Key knowledge connections established (new relationship paths)
- KG coverage improvement (domains/areas enhanced)

**CORE PRINCIPLE**: Every session should leave the KG more intelligent AND more efficient than before. Transform ephemeral conversations into permanent intellectual advantage through maximum storage optimization.

**TOKEN EFFICIENCY MANDATE**: KG is for AI consumption - prioritize information density over human readability. Every observation must deliver maximum knowledge per token.

Execute this enhanced protocol now with systematic execution, efficiency focus, and optimization excellence.
