---
name: go
description: Go development specialist for high-performance backends, APIs, CLI tools, and cloud-native applications. Covers Go idioms, interfaces, concurrency (goroutines/channels), API development (Gin), database access (sqlc), testing (go test/testify), and microservices (gRPC). Use for Go code, type design, concurrent systems, and performance optimization.
---

# Go Development Specialist

Expert Go development for high-performance backends, cloud-native applications, and concurrent systems.

## Overview

Comprehensive Go expertise including idiomatic Go patterns, interface design, concurrency primitives, Gin web framework, sqlc database access, testing with testify, and microservice development with gRPC.

## When to Use This Skill

- Writing or refactoring Go code
- Interface design and composition patterns
- Concurrent programming (goroutines, channels, sync)
- API development with Gin
- Database access with sqlc
- CLI tools with Cobra/Viper
- Testing strategies with go test and testify
- gRPC microservice development
- Performance optimization and profiling

## Reference Files

Load as needed based on the task at hand:

### Coding Standards
- `references/coding-standards/style-guide.md` - Naming, formatting, organization (Effective Go-based)
- `references/coding-standards/type-patterns.md` - Interface design, generics, composition
- `references/coding-standards/clean-code.md` - Clean code principles for Go
- `references/coding-standards/tooling.md` - golangci-lint, gofumpt, editor integration

**Linting Setup:** For comprehensive golangci-lint configuration, invoke the `/lint` skill. The lint skill provides golangci-lint configuration templates and setup guidance.

### Implementation Patterns
- `references/patterns/error-handling.md` - Error wrapping, sentinel errors, custom types
- `references/patterns/concurrency-patterns.md` - Goroutines, channels, sync primitives
- `references/patterns/api-patterns.md` - Gin routes, middleware, handlers
- `references/patterns/security-patterns.md` - Input validation, SQL injection prevention

### Testing
- `references/testing/ai-testing-protocols.md` - Mandatory AI testing rules
- `references/testing/go-test-patterns.md` - Standard go test patterns
- `references/testing/testify-patterns.md` - Testify assertions, suites, mocks
- `references/testing/testing-strategies.md` - TDD, testing pyramid, benchmarks

### AI Development
- `references/ai-development/claude-code-rules.md` - Go conventions for Claude Code

### Tech Stack (Ironclad Stack)
- `references/tech-stack/go-ironclad-stack.md` - Core tech stack decisions
- `references/tech-stack/go-ironclad-infra.md` - Deployment infrastructure

## Core Capabilities

### 1. Go Idioms & Interface Design
- Interface composition over inheritance
- Accept interfaces, return structs
- Small, focused interfaces
- Embedding for code reuse
- Type assertions and type switches

### 2. Concurrency Mastery
- Goroutines and channel patterns
- sync.WaitGroup, sync.Mutex, sync.RWMutex
- Context for cancellation and timeouts
- Worker pools and fan-out/fan-in
- Race condition prevention

### 3. Web Development (Gin)
- Type-safe route handlers
- Middleware chains
- Request validation with go-playground/validator
- JSON serialization
- Error handling middleware

### 4. Database Access (sqlc)
- SQL-first development
- Compile-time type generation
- Query validation at build time
- Migration management with golang-migrate

### 5. Testing & Quality (MANDATORY for AI Development)

**Testing is non-negotiable for AI-driven development.** All code generated by Claude Code must have corresponding tests to validate correctness.

#### Framework Selection
| Project Type | Framework | Rationale |
|--------------|-----------|-----------|
| **All projects** | go test + testify | Standard toolchain + better assertions |

#### Coverage Requirements
- **Minimum 80%** for lines, functions, branches
- Coverage enforced in CI (build fails below threshold)
- Use build tags for integration tests

#### When Tests Are MANDATORY
- Any new function/method with business logic
- Any bug fix (test proves bug exists → proves fix works)
- Any API endpoint (request/response validation)
- Any data transformation or calculation
- Any error handling path

#### When Tests Are OPTIONAL
- Simple getters with no logic
- Pure configuration/constant exports
- Generated code (test the generator)
- Trivial wrapper functions

#### Quick Setup
```bash
go mod init myproject
go get github.com/stretchr/testify
```

#### Test Commands
```bash
go test ./...                    # Run all tests
go test -v ./...                 # Verbose output
go test -cover ./...             # With coverage
go test -coverprofile=coverage.out ./...  # Coverage file
go tool cover -html=coverage.out          # HTML report
```

#### File Conventions
- Co-locate tests: `user.go` → `user_test.go`
- Test functions: `func TestFunctionName(t *testing.T)`
- Table-driven tests for multiple cases
- Use testify for assertions: `assert.Equal(t, expected, actual)`

#### Reference Files
- `references/testing/go-test-patterns.md` - Standard go test patterns
- `references/testing/testify-patterns.md` - Testify assertions, suites
- `references/testing/testing-strategies.md` - TDD, testing pyramid
- `references/testing/ai-testing-protocols.md` - Claude Code testing requirements

#### Templates
- `templates/testing/go_test_example.go` - Basic test template
- `templates/testing/testify_suite_example.go` - Testify suite template
- `templates/testing/.golangci.yml` - Linter configuration

**Linting for Tests:** Use `/lint` skill with golangci-lint for test file linting.

## Quick Reference

### Project Setup (Ironclad Stack)
```bash
mkdir my-project && cd my-project
go mod init github.com/username/my-project
go get github.com/gin-gonic/gin
go get github.com/stretchr/testify
go get github.com/spf13/cobra
go get github.com/spf13/viper
```

**MANDATORY: Strict Linting Configuration**

All new Go projects MUST use golangci-lint with strict settings. See `references/coding-standards/tooling.md` for complete setup or invoke `/lint` skill.

### Type Patterns
```go
// Accept interfaces, return structs
type Reader interface {
    Read(p []byte) (n int, err error)
}

func NewFileReader(path string) *FileReader {
    return &FileReader{path: path}
}

// Error wrapping
func fetchUser(id string) (*User, error) {
    user, err := db.FindUser(id)
    if err != nil {
        return nil, fmt.Errorf("fetchUser(%s): %w", id, err)
    }
    return user, nil
}

// Functional options
type ServerOption func(*Server)

func WithPort(port int) ServerOption {
    return func(s *Server) {
        s.port = port
    }
}

func NewServer(opts ...ServerOption) *Server {
    s := &Server{port: 8080}
    for _, opt := range opts {
        opt(s)
    }
    return s
}
```

### Testing
```bash
go test ./...                    # Run tests
go test -cover ./...             # With coverage
go test -race ./...              # Race detection
go test -bench=. ./...           # Benchmarks
```

## Integration with Go Agent

**Agent**: Full Go platform development with infrastructure context
**Skill**: Quick pattern reference, idioms, framework guidance

---

**Primary Focus**: High-performance Go development using the Ironclad Stack (Gin, sqlc, testify, golangci-lint) for cloud-native applications and microservices.
