---
name: dotnet
description: .NET development specialist for enterprise applications, APIs, microservices, and cloud-native systems. Covers C# idioms, ASP.NET Core Minimal APIs, Entity Framework Core, testing (xUnit/FluentAssertions/Moq), Roslyn analyzers, and Azure/AWS deployment. Use for .NET code, type design, async patterns, and performance optimization.
---

# .NET Development Specialist

Expert .NET development for enterprise applications, cloud-native systems, and high-performance APIs.

## Overview

Comprehensive .NET expertise including idiomatic C# patterns, ASP.NET Core Minimal APIs, Entity Framework Core, dependency injection, testing with xUnit, and deployment to Azure/AWS.

## When to Use This Skill

- Writing or refactoring C# code
- Type design with records, generics, nullable reference types
- API development with ASP.NET Core Minimal APIs
- Database access with Entity Framework Core
- CLI tools with System.CommandLine
- Testing strategies with xUnit, FluentAssertions, Moq
- gRPC microservice development
- Performance optimization and async patterns

## Reference Files

Load as needed based on the task at hand:

### Coding Standards
- `references/coding-standards/style-guide.md` - Naming, formatting, organization (Microsoft conventions)
- `references/coding-standards/type-patterns.md` - Records, generics, nullable reference types
- `references/coding-standards/clean-code.md` - SOLID principles, dependency injection patterns
- `references/coding-standards/tooling.md` - Roslyn analyzers, .editorconfig, IDE integration

**Linting Setup:** For comprehensive Roslyn analyzer configuration, invoke the `/lint` skill. The lint skill provides analyzer configuration and .editorconfig templates.

### Implementation Patterns
- `references/patterns/error-handling.md` - Result pattern, exceptions, ProblemDetails API
- `references/patterns/async-patterns.md` - async/await, ValueTask, Polly resilience
- `references/patterns/api-patterns.md` - Minimal APIs, middleware, routing patterns
- `references/patterns/security-patterns.md` - Authentication, validation, OWASP protections

### Testing
- `references/testing/ai-testing-protocols.md` - Mandatory AI testing rules
- `references/testing/xunit-patterns.md` - xUnit test structure, traits, fixtures
- `references/testing/assertion-mocking-patterns.md` - FluentAssertions + Moq patterns
- `references/testing/testing-strategies.md` - TDD, integration tests, coverage

### AI Development
- `references/ai-development/claude-code-rules.md` - C# conventions for Claude Code

### Tech Stack (Ironclad Stack)
- `references/tech-stack/dotnet-ironclad-stack.md` - Core tech stack decisions
- `references/tech-stack/dotnet-ironclad-infra.md` - Deployment infrastructure

## Core Capabilities

### 1. C# Idioms & Type Design
- Records for immutable data
- Nullable reference types (NRT) for null safety
- Pattern matching and switch expressions
- Generic constraints and variance
- Extension methods for fluent APIs

### 2. ASP.NET Core Minimal APIs
- Endpoint routing with MapGet/MapPost
- Dependency injection integration
- Request/response binding
- Middleware pipeline
- OpenAPI/Swagger generation

### 3. Entity Framework Core
- LINQ-based queries (compile-time validated)
- Code-first migrations
- Change tracking and SaveChanges
- Query optimization with AsNoTracking
- Raw SQL when needed

### 4. Async Programming
- async/await patterns
- ValueTask for high-performance paths
- IAsyncEnumerable for streaming
- Cancellation token propagation
- Parallel operations with Task.WhenAll

### 5. Testing & Quality (MANDATORY for AI Development)

**Testing is non-negotiable for AI-driven development.** All code generated by Claude Code must have corresponding tests to validate correctness.

#### Framework Selection
| Project Type | Framework | Rationale |
|--------------|-----------|-----------|
| **All projects** | xUnit + FluentAssertions + Moq | Industry standard, expressive assertions |

#### Coverage Requirements
- **Minimum 80%** for lines, functions, branches
- Coverage enforced in CI (build fails below threshold)
- Use categories for integration test separation

#### When Tests Are MANDATORY
- Any new method with business logic
- Any bug fix (test proves bug exists â†’ proves fix works)
- Any API endpoint (request/response validation)
- Any data transformation or calculation
- Any error handling path

#### When Tests Are OPTIONAL
- Simple DTOs with no logic
- Pure configuration classes
- Generated code (test the generator)
- Trivial wrapper methods

#### Quick Setup
```bash
dotnet new xunit -o MyProject.Tests
dotnet add MyProject.Tests package FluentAssertions
dotnet add MyProject.Tests package Moq
dotnet add MyProject.Tests package Microsoft.AspNetCore.Mvc.Testing
```

#### Test Commands
```bash
dotnet test                           # Run all tests
dotnet test --verbosity normal        # Verbose output
dotnet test --collect:"XPlat Code Coverage"  # With coverage
dotnet test --filter "Category=Unit"  # Filter by category
```

#### File Conventions
- Separate test project: `MyProject.Tests`
- Test classes: `{ClassName}Tests.cs`
- Test methods: `MethodName_Scenario_ExpectedResult()`
- Use FluentAssertions: `result.Should().Be(expected)`

#### Reference Files
- `references/testing/xunit-patterns.md` - xUnit test structure
- `references/testing/assertion-mocking-patterns.md` - FluentAssertions + Moq
- `references/testing/testing-strategies.md` - TDD, integration tests
- `references/testing/ai-testing-protocols.md` - Claude Code testing requirements

#### Templates
- `templates/testing/xunit_example.cs` - Basic test template
- `templates/testing/integration_test_example.cs` - WebApplicationFactory template
- `templates/testing/.editorconfig` - Standard .editorconfig

**Linting for Tests:** Use `/lint` skill with Roslyn analyzers for test file analysis.

## Quick Reference

### Project Setup (Ironclad Stack)
```bash
dotnet new web -o MyApi
cd MyApi
dotnet add package FluentValidation.DependencyInjectionExtensions
dotnet add package Polly.Extensions.Http
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
```

**MANDATORY: Strict Analyzer Configuration**

All new .NET projects MUST use Roslyn analyzers with strict settings. See `references/coding-standards/tooling.md` for complete setup or invoke `/lint` skill.

### Type Patterns
```csharp
// Immutable records for DTOs
public record UserDto(string Id, string Name, string Email);

// Result pattern for error handling
public abstract record Result<T>
{
    public record Success(T Value) : Result<T>;
    public record Failure(string Error) : Result<T>;
}

// Nullable reference types
public string? GetUserName(string id)
{
    var user = _repository.Find(id);
    return user?.Name;
}

// Pattern matching
var message = result switch
{
    Result<User>.Success s => $"Found: {s.Value.Name}",
    Result<User>.Failure f => $"Error: {f.Error}",
    _ => "Unknown result"
};
```

### Testing
```bash
dotnet test                           # Run tests
dotnet test --collect:"XPlat Code Coverage"  # With coverage
dotnet test --filter "FullyQualifiedName~UnitTests"  # Filter
```

## Integration with .NET Agent

**Agent**: Full .NET platform development with enterprise context
**Skill**: Quick pattern reference, idioms, framework guidance

---

**Primary Focus**: Enterprise-grade .NET development using the Ironclad Stack (ASP.NET Core Minimal APIs, EF Core, xUnit, FluentAssertions, Roslyn analyzers) for cloud-native applications and microservices.
